<!-- saved from url=(0014)about:internet -->
<pre class="code">
<span class="srcline"><span class="lineno"><a href="1,1" id="srcline1"> 1</a></span><span class="line"><span class="comment">%function [ddqDH]=forwardDynamics(tau, qDH, dqDH, JTh)</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,2" id="srcline2"> 2</a></span><span class="line"><span class="keyword">function</span> [<span class="var type1" id="S2T1U3">ddqDH</span>]=forwardDynamics(<span class="var type1" id="S3T1U6">tau</span>, <span class="var type1" id="S4T2U7">qDH</span>, <span class="var type1" id="S5T2U8">dqDH</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="1,3" id="srcline3"> 3</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,4" id="srcline4"> 4</a></span><span class="line">         <span class="mxinfo " id="T3:U5"><span class="var type1" id="S6T3U11">B_q</span> = <span class="mxinfo " id="T3:U7">zeros(<span class="mxinfo " id="T4:U8">8</span>,<span class="mxinfo " id="T4:U9">8</span>)</span></span>;  </span></span>
<span class="srcline"><span class="lineno"><a href="1,5" id="srcline5"> 5</a></span><span class="line">         <span class="mxinfo " id="T1:U10"><span class="var type1" id="S8T1U18">Centrifugo</span> = <span class="mxinfo " id="T1:U12">zeros(<span class="mxinfo " id="T4:U13">8</span>,1)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,6" id="srcline6"> 6</a></span><span class="line">     <span class="mxinfo " id="T1:U14"><span class="var type1" id="S9T1U25">Attr_Viscoso</span> = <span class="mxinfo " id="T1:U16">zeros(<span class="mxinfo " id="T4:U17">8</span>,1)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,7" id="srcline7"> 7</a></span><span class="line">     <span class="mxinfo " id="T1:U18"><span class="var type1" id="S10T1U32">Gravita</span> =  <span class="mxinfo " id="T1:U20">zeros(<span class="mxinfo " id="T4:U21">8</span>,1)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,8" id="srcline8"> 8</a></span><span class="line">   </span></span>
<span class="srcline"><span class="lineno"><a href="1,9" id="srcline9"> 9</a></span><span class="line">     </span></span>
<span class="srcline"><span class="lineno"><a href="1,10" id="srcline10">10</a></span><span class="line">      <span class="mxinfo " id="T3:U22"><span class="var type1" id="S6T3U39">B_q</span> = <span class="mxinfo " id="T3:U24"><span class="fcn" id="F224N5:B41">MatriceInerzia2</span>(<span class="mxinfo " id="T2:U25"><span class="var type1" id="S4T2U43">qDH</span>(1:8)</span>)</span></span>; </span></span>
<span class="srcline"><span class="lineno"><a href="1,11" id="srcline11">11</a></span><span class="line">     <span class="comment">% if(length(qDH)&gt;6) B_q(7,7) = 150; B_q(8,8) = 150; end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,12" id="srcline12">12</a></span><span class="line">      </span></span>
<span class="srcline"><span class="lineno"><a href="1,13" id="srcline13">13</a></span><span class="line">        </span></span>
<span class="srcline"><span class="lineno"><a href="1,14" id="srcline14">14</a></span><span class="line">      </span></span>
<span class="srcline"><span class="lineno"><a href="1,15" id="srcline15">15</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,16" id="srcline16">16</a></span><span class="line">     <span class="mxinfo " id="T1:U27"><span class="var type1" id="S8T1U49">Centrifugo</span> = <span class="mxinfo " id="T1:U29"><span class="fcn" id="F308N3:B51">CCentrifugo3</span>(<span class="var type1" id="S4T2U52">qDH</span>, <span class="var type1" id="S5T2U53">dqDH</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,17" id="srcline17">17</a></span><span class="line">      </span></span>
<span class="srcline"><span class="lineno"><a href="1,18" id="srcline18">18</a></span><span class="line">      <span class="mxinfo " id="T1:U32"><span class="var type1" id="S9T1U56">Attr_Viscoso</span> = <span class="mxinfo " id="T1:U34"><span class="fcn" id="F312N2:B58">CAViscoso</span>(<span class="var type1" id="S5T2U59">dqDH</span>)</span></span>; </span></span>
<span class="srcline"><span class="lineno"><a href="1,19" id="srcline19">19</a></span><span class="line">      <span class="comment">%Attr_Statico = 0*CAStatico(dqDH);  if(length(qDH)&gt;6) Attr_Statico(7:8) = 0; end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,20" id="srcline20">20</a></span><span class="line">      <span class="mxinfo " id="T1:U36"><span class="var type1" id="S10T1U62">Gravita</span>= <span class="mxinfo " id="T1:U38"><span class="fcn" id="F265N4:B64">CGravita2</span>(<span class="var type1" id="S4T2U65">qDH</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,21" id="srcline21">21</a></span><span class="line">     <span class="comment">%q = dh2comau(qDH);</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,22" id="srcline22">22</a></span><span class="line">     <span class="comment">% JTh = (H')^-1*(mat_jac(q))'*h;</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,23" id="srcline23">23</a></span><span class="line">      <span class="comment">%ddqDH = B_q^-1*(tau-Centrifugo-Attr_Viscoso-Gravita-JTh);</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,24" id="srcline24">24</a></span><span class="line">      <span class="mxinfo " id="T1:U40"><span class="var type1" id="S2T1U68">ddqDH</span> = <span class="mxinfo " id="T1:U42"><span class="mxinfo " id="T3:U43"><span class="var type1" id="S6T3U71">B_q</span>^-1</span>*(<span class="mxinfo " id="T1:U45"><span class="mxinfo " id="T1:U46"><span class="mxinfo " id="T1:U47"><span class="var type1" id="S3T1U78">tau</span>-<span class="var type1" id="S8T1U79">Centrifugo</span></span>-<span class="var type1" id="S9T1U80">Attr_Viscoso</span></span>-<span class="var type1" id="S10T1U81">Gravita</span></span>)</span></span>;</span></span>
</pre>
